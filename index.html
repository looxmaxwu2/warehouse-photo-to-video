<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resimden Videoya D√∂n√º≈üt√ºr√ºc√º</title>
    <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.11.6/dist/ffmpeg.min.js"></script>
    <style>
        /* √ñnceki CSS kodlarƒ±nƒ± aynen tutuyoruz */
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --dark: #1b263b;
            --light: #f8f9fa;
            --danger: #ef233c;
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #e9ecef;
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        /* ... Diƒüer CSS kurallarƒ± aynen kalƒ±yor ... */
    </style>
</head>
<body>
    <div class="container">
        <!-- HTML yapƒ±sƒ± aynen kalƒ±yor -->
        <h1>üì∏ Resimden Videoya D√∂n√º≈üt√ºr√ºc√º</h1>
        <div class="upload-area" id="uploadArea">
            <div style="font-size: 50px; margin-bottom: 15px;">üìÅ</div>
            <p style="font-size: 18px; margin-bottom: 10px;">Resmi s√ºr√ºkleyip bƒ±rakƒ±n veya tƒ±klayarak se√ßin</p>
            <p style="color: #6c757d; font-size: 14px;">(JPEG, PNG, GIF destekler)</p>
            <input type="file" id="imageInput" accept="image/*" class="file-input">
            <div id="fileInfo"></div>
        </div>
        <!-- ... Diƒüer HTML elemanlarƒ± aynen kalƒ±yor ... -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementler
            const uploadArea = document.getElementById('uploadArea');
            const imageInput = document.getElementById('imageInput');
            const convertBtn = document.getElementById('convertBtn');
            const durationInput = document.getElementById('duration');
            const formatSelect = document.getElementById('format');
            const loadingAnimation = document.getElementById('loadingAnimation');
            const videoOutput = document.getElementById('videoOutput');
            const downloadBtn = document.getElementById('downloadBtn');
            const fileInfo = document.getElementById('fileInfo');
            const progressBar = document.getElementById('progressBar');
            const statusText = document.getElementById('statusText');
            
            let selectedImage = null;
            let ffmpeg = null;
            let isFFmpegReady = false;

            // FFmpeg durumunu kontrol etmek i√ßin fonksiyon
            function updateConvertButtonState() {
                if (selectedImage && isFFmpegReady) {
                    convertBtn.disabled = false;
                    convertBtn.innerHTML = '<span class="icon">üé•</span><span>Videoya D√∂n√º≈üt√ºr</span>';
                } else {
                    convertBtn.disabled = true;
                    if (!isFFmpegReady) {
                        convertBtn.innerHTML = '<span class="icon">‚è≥</span><span>FFmpeg Y√ºkleniyor...</span>';
                    } else {
                        convertBtn.innerHTML = '<span class="icon">üé•</span><span>Videoya D√∂n√º≈üt√ºr</span>';
                    }
                }
            }

            // FFmpeg'i y√ºkle
            async function loadFFmpeg() {
                if (ffmpeg && ffmpeg.isLoaded()) return;
                
                try {
                    statusText.textContent = "FFmpeg y√ºkleniyor (‚âà25MB), l√ºtfen bekleyin...";
                    
                    ffmpeg = createFFmpeg({ 
                        log: true,
                        corePath: 'https://unpkg.com/@ffmpeg/core@0.11.0/dist/ffmpeg-core.js',
                        progress: ({ ratio }) => {
                            const percent = Math.round(ratio * 100);
                            progressBar.style.width = `${percent}%`;
                            statusText.textContent = `FFmpeg y√ºkleniyor: %${percent}`;
                        }
                    });
                    
                    await ffmpeg.load();
                    
                    statusText.textContent = "FFmpeg ba≈üarƒ±yla y√ºklendi!";
                    progressBar.style.width = "100%";
                    isFFmpegReady = true;
                    updateConvertButtonState();
                    
                    setTimeout(() => {
                        progressBar.style.width = "0%";
                    }, 1000);
                } catch (error) {
                    console.error("FFmpeg y√ºkleme hatasƒ±:", error);
                    statusText.textContent = "FFmpeg y√ºklenirken hata olu≈ütu! L√ºtfen sayfayƒ± yenileyin.";
                    isFFmpegReady = false;
                    updateConvertButtonState();
                }
            }
            
            // Sayfa y√ºklendiƒüinde FFmpeg'i y√ºkle
            loadFFmpeg();
            
            // Dosya y√ºkleme alanƒ± etkile≈üimleri
            uploadArea.addEventListener('click', () => imageInput.click());
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('active');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('active');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('active');
                
                if (e.dataTransfer.files.length) {
                    handleImageFile(e.dataTransfer.files[0]);
                }
            });
            
            imageInput.addEventListener('change', () => {
                if (imageInput.files.length) {
                    handleImageFile(imageInput.files[0]);
                }
            });
            
            function handleImageFile(file) {
                if (!file.type.startsWith('image/')) {
                    showAlert("L√ºtfen bir resim dosyasƒ± se√ßin! (JPEG, PNG, GIF vb.)", "error");
                    return;
                }
                
                const maxSize = 10 * 1024 * 1024; // 10MB
                if (file.size > maxSize) {
                    if (!confirm(`Se√ßtiƒüiniz dosya boyutu √ßok b√ºy√ºk (${(file.size / 1024 / 1024).toFixed(1)}MB). Devam etmek istiyor musunuz? D√∂n√º≈ü√ºm uzun s√ºrebilir.`)) {
                        return;
                    }
                }
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    selectedImage = e.target.result;
                    uploadArea.innerHTML = `
                        <img src="${selectedImage}" style="max-width: 100%; max-height: 300px; border-radius: 8px; margin-bottom: 15px;">
                        <div id="fileInfo">üìÑ ${file.name} (${(file.size / 1024 / 1024).toFixed(2)}MB)</div>
                    `;
                    
                    updateConvertButtonState();
                };
                reader.readAsDataURL(file);
            }
            
            // ... Diƒüer fonksiyonlar (createVideo, showAlert vb.) aynen kalƒ±yor ...
            
            // Buton durumunu ilk y√ºklemede ayarla
            updateConvertButtonState();
        });
    </script>
</body>
</html>
